# Lazy
- [官网](https://zh-hans.react.dev/reference/react/lazy)
- [B站-理想哥](https://www.bilibili.com/video/BV1P2ZwYYEkT)
- lazy 能够让你在组件第一次被渲染之前延迟加载组件的代码。
- lazy 接收一个函数，这个函数需要返回一个 Promise，这个 Promise 需要 resolve 一个 React 组件。
- 高阶函数 懒加载 提升了网页性能
- 一般配合 Suspense 使用
- 不要在其他组件 内部 声明 lazy 组件

## 原理
- 首次渲染时 它返回的组件处于 ``pending``挂起状态. 此时 会显示 Suspense 组件的 fallback。
- webpack等工具会把 lazy 组件的代码分割成chunk。在需要的时候，webpack会自动加载chunk。
```jsx
import { lazy } from 'react';

function Editor() {
  // 🔴 Bad: 这将导致在重新渲染时重置所有状态
  const MarkdownPreview = lazy(() => import('./MarkdownPreview.js'));
  // ...
}
```
```jsx
import { lazy } from 'react';

// ✅ Good: 将 lazy 组件声明在组件外部
const MarkdownPreview = lazy(() => import('./MarkdownPreview.js'));

function Editor() {
  // ...
}
```
