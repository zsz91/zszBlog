# useContext 上下文
#### 概念

1.  它就像一种为了子树准备的全局变量

#### 使用方法

1.  使用 createContext 创建上下文 上下文可以是 函数 对象等复杂数据
2.  使用 Provider 提供上下文
3.  在作用域内使用 useContext 使用上下文

#### 示例代码

```javascript
import React, { useContext, createContext, useState } from 'react';
import { Button } from 'antd';

// 使用 createContext 创建上下文
export const CreateC = createContext(0);

export default function useContextDemo() {
	const [n, setN] = useState(0);
	return (
		<CreateC.Provider value={{ n, setN }}>
			<div>
				<Xiaofei />
			</div>
		</CreateC.Provider>
	);
	// 上下文的 提供者
}

function Xiaofei() {
	// 上下文的 消费者
	const { n } = useContext(CreateC);
	return (
		<div>
			我是父消费者 我得到了n:{n}
			<XiaofeiChild />
		</div>
	);
}

function XiaofeiChild() {
	const { n, setN } = useContext(CreateC);
	return (
		<div>
			我是子孙消费者, 我也能得到 {n}
			<br />
			<Button
				onClick={() => {
					setN((n) => n + 1);
				}}>
				n + 1
			</Button>
		</div>
	);
}

```

#### 在类组件中使用createContext

CreateC.js

```javascript
import { createContext } from 'react';
const CreateC = createContext({
  routerConfig: {},
  locationState: {},
});

export default CreateC;

```

类组件.js
```javascript

    import CreateC from './ContextCreate'; // 引入context

    class AuditPage extends Component {
        // 类组件
        this.context // 获取context
    }
    AuditPage.contextType = CreateC; // 申明使用哪个Context
    export default AuditPage; // 导出
```
*   必须使用 default export 导出 context 否则react 会报错
*   通过 XXX.contextType = context ; 申明使用的context

