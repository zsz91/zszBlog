# useReducer
#### 创建一个reducer

1.  useReducer 是 useState 的复杂版
2.  useReducer函数 接受2个参数 第一个是reducer函数, 第二个是state的初始值
3.  看代码，分四步走

- 一、创建初始值initialState
- 二、创建所有操作reducer(state, action);
- 三、传给userReducer，得到读和写API
- 四、调用写({type: '操作类型'})

#### 示例代码

```javascript
import React, { useReducer } from 'react';
import { Button } from 'antd';

// 1. 创建初始值 state
const initial = { n: 0 };

// 2. 创建所有操作reducer(state, action)
const reducer = (state, action) => {
	/**
	 * action为 dispatch函数传递过来的参数.
	 **/
	switch (action.type) {
		case 'add':
			return {
				n: state.n + action.number,
			};
			break;
		case 'multi':
			return {
				n: state.n * 2,
			};
			break;
		default:
			throw new Error('unknown type');
			break;
	}
};

export default function useReducerDemo() {
	// 3.  传给userReducer，得到读和写API
	const [state, dispatch] = useReducer(reducer, initial);
	const { n } = state;
	return (
		<div>
			<h1>n: {n}</h1>
			<Button
				onClick={() => {
					// 4. 调用写({type: '操作类型'})
					dispatch({ type: 'add', number: 1 });
				}}>
				自增dispatch
			</Button>
			<Button
				onClick={() => {
					// 4.调用写({type: '操作类型'})
					dispatch({ type: 'multi', number: 1 });
				}}>
				乘以2 dispatch
			</Button>
		</div>
	);
}

```

#### 如何代替Redux

一、将数据集中在一个 store 对象

二、将所有操作集中在 reducer

三、创建一个 Context

四、创建对数据的读取 API

五、将第四步的内容放到第三步的 Context

六、用 Context.Provider 将 Context 提供给所有组件

七、各个组件用 useContext 获取读写API


#### 与useContext一起使用
1. 结合useContext和useReducer可以创建简单的全局状态管理系统
2. https://juejin.cn/post/7274789845754445859?searchId=20230919175214FAEB5A825F7069065135#heading-4
