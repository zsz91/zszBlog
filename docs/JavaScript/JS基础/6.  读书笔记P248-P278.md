# DOM
- DOM是针对HTML 和 XML 文档的一个API. 脱胎于Netscape及微软公司创始的DHTML(动态HTML),但现在它已经成为表现和操作页面标记的真正的跨平台,语言中立的方式.
- 节点层次
    1. 文档元素html 是文档的最外层元素,文档中的其他所有元素都包含在文档元素中.每个文档只能有一个文档元素.
- Node类型
  1. DOM1级定义了一个 Node 接口,该接口将由 DOM 中的所有节点类型实现.
  2. 所有节点类型都共享着相同的基本属性和方法.
  3. 每个节点都有一个nodeType属性,用于表明节点的类型.
  4. 12种节点类型: 每一种有一个数值来表示

```javascript
    Node.ELEMENT_NODE=1;
    Node.ATTRIBUTE_NODE=2;
    Node.TEXT_NODE=3;
    Node.CDATA_SECTION_NODE=4;
    Node.ENTITY_REFERENCE_NODE=5;
    Node.ENTITY_NODE=6;
    Node.PROCESSING_INSTRUCTION_NODE=7;
    Node.COMMENT_NODE=8;
    Node.DOCUMENT_NODE=9;
    Node.DOCUMENT_TYPE_NODE=10;
    Node.DOCUMENT_FRAGMENT_NODE=11;
    Node.NOTATION_NODE=12;
    
    const someNode = document.getElementById('root');
    if(someNode.nodeType === Node.ELEMENT_NODE){ // someNode.nodeType === 1
        alert('Node is an element.');
    }
    // 上面的代码 等价于
    if(someNode.nodeType === 1){
        alert('Node is an element.');
        console.log(someNode.nodeName) // 元素节点 nodeName的值是元素的标签名 (DIV)
        console.log(someNode.nodeValue) // 元素节点 nodeValue 的值始终为null
    }

```

- 节点关系
1. 每个节点都有一个 childNodes 属性, 其中保存着一个NodeList 对象. 
2. NodeList 是一种类数组对象(并不是Array的实例),用于保存一组有序的节点.
3. DOM结构的变化能够自动反映在NodeList对象中.
4. 我们常说,NodeList是有生命、有呼吸的对象.

```javascript
let conut = someNode.childNodes.length; // NodeList的length属性表示访问NodelList 的那一刻,其中包含的节点数量.
```

```javascript
const a = Array.prototype.slice.call(someNode.childNodes, 0);
// 将NodeList对象转换为数组.(适用于其他类数组对象转换为数组);
```

- 节点属性
2. 每一个节点都有一个 `parentNode` 属性,该属性指向文档树中的父节点.
3. 兄弟节点访问: 通过列表中每个节点的 `previousSibling` 和 `nextSibling` 属性,可以访问同一列表中的其他节点.列表中第一个节点的 `previousSibling` 为null 最后一个节点的 `nextSibling` 也为null.
4. 父节点的 `firstChild` 和 `lastChild` 属性分别指向其 `childNodes` 列表中的第一个和最后一个节点. 如果没有子节点则 `firstChild` 和 `lastChild` 均为null
5. 通过 `hasChildNodes()` 方法 判断一个节点是否包含子节点.如果包含返回true
6. 所有节点都有一个 `ownerDocument` 属性,该属性指向表示整个文档的文档节点 `<html>`

- 操作节点
1. `appendChild()` 用于向 `childNodes` 列表的末尾添加一个节点,如果传入到 `appendChild()` 中的节点已经是文档的一部分了,那结果就是将该节点从原来的位置转移到新位置(任何DOM节点不能同时出现在文档中的多个位置上)
2. `insertBefore(insertNode,参照的节点)`: 将插入的节点插入到参照节点的前面,成为参照节点的前一个同胞节点.
3. `replaceChild()`方法接受的两个参数是: 要插入的节点和要替换的节点.返回被替换的节点且该节点从文档树中被移除.
4. `removeChild()` 移除一个节点并返回被移除的节点.
5. `cloneNode()`: 用于创建调用这个方法的节点的一个完全相同的副本.该方法接收一个布尔值参数,表示是否执行深复制. true:深复制(复制节点及其整个子节点树) false:浅复制(复制节点本身).复制后的节点属于文档但是一个孤儿节点.
   该方法不会复制添加到DOM节点中的JavaScript属性(事件处理程序等),只复制特性
6. ``normalize()`` 这个方法的唯一作用就是处理文档树中的文本节点.(后续还会讨论)


- Document 类型
1. JS通过Document类型表示文档. document对象是HTMLDocument(继承自Document 类型) 的一个实例,表示整个HTML页面.而且,document对象是window对象的一个属性,因此可以将其作为全局对象来访问.
2. Document节点的特征
```javascript
    document //  = window.document;
```

```javascript
    nodeType : 9
    nodeName: "#document"
    nodeValue: null
    parentNode: null
    ownerDocument: null
    // 子节点可能是一个DocumentType(最多一个)、Element(最多一个)、ProcessInstruction或Comment;
    // 可以通过脚本访问Document类型的构造函数和原型
```

3. 文档的子节点: 虽然子节点是以上中说的4种之一,但还有两个内置的访问其子节点的快捷方式. 
4. 第一个就是documentElement属性,该属性始终指向HTML页面中的`<html>`.另一个就是通过 `childNodes` 列表访问文档元素.

```javascript
  const html = document.documentElement; // 取得对<html>的引用.
  html === document.childNodes[0] // true;
  html === document.firstChild // true;
  document.body // 指向<body> 元素
  document.doctype // 取得对<!DOCTYPE>的引用P254
```

```javascript
    document.title; // 浏览器窗口的标题 title元素中的文本
    document.URL; // 完整的url无法设置
    document.domain; // 域名  出于安全限制不能将这个属性设置为URL中不包含的域 可以改变子域名 如 v.qq.com 可以改为 lol.qq.com 但不能改为www.baidu.com
    document.referrer; //取得来源页面的URL 无法设置
```




