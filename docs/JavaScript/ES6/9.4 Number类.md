# Number

## toFixed的结果可能会欺骗你
- toFixed 不是严格的四舍五入 因为js存储,计算,显示小数都是有问题的. 二进制存储的问题
- [B站](https://www.bilibili.com/video/BV1TcdZY9ETf)
- 使用第三方库解决精度问题.
- toPrecision指定精度显示: ``0.3.toPrecision(40)`` 就可以看到真实存储的是多少了

1.  Number.EPSILON 表示 JavaScript 的最小精度
2.  Number.EPSILON 属性的值接近于 2.22E-16

### 使用 ```_```让数字更可读
```javascript
const sixBillion2 = 6000_000_000; // 6000000000
const sum = 1000 + 6000_000_000 // 6000001000
```
// 浮点数加法函数 解决精度问题
// 本质就是把浮点数加法变成整数的加法 
```javascript
function accAdd(num1, num2) {
  let r1, r2, m;
  try {
    r1 = num1.toString().split(".")[1].length;
  }
  catch (e) {
    r1 = 0;
  }
  try {
    r2 = num2.toString().split(".")[1].length;
  }
  catch (e) {
    r2 = 0;
  }
  m = Math.pow(10, Math.max(r1, r2)); // 计算10的 max(r1,r2)次方
  return (num1 * m + num2 * m) / m;
}


 console.log(0.1 + 0.2 === 0.3) // false js 浮点数舍入错误所致(红皮书P38)

 function equal(a, b){ // 使用最小精度解决此bug
     if(Math.abs(a-b) < Number.EPSILON){
         return true;
     }else{
         return false;
     }
 }
 console.log(equal(0.1 + 0.2, 0.3)) // true 
 
```

#### 二进制 八进制 十六进制

     console.log(0b1010) // 10; 二进制
     console.log(0o10) // 8; 八进制
     console.log(0xf); // 15; 16进制

#### parseInt

*   parseInt(string, radix)   解析一个字符串并返回指定基数的十进制整数， radix 是2-36之间的整数，表示被解析字符串的基数。

<!---->

    parseInt(41, 16); // 65 将16进制的41 转成10进制
    parseInt('41', 16); // 65 一样的

#### 红皮书读书笔记 和 最新的 Number的属性,方法

1.  Number.isFinite() 检测一个数是否为有限数 100/0 // false
2.  Number.isNaN() 检测一个数是否为NaN
3.  Number.parseInt() 字符串转整数
4.  Number.parseFloat() 字符串转浮点数
5.  Number.isInteger() 判断是否为整数. (传入非数字类型 返回false)
6.  Number.MAX\_SAFE\_INTEGER 最大安全整数
7.  Number.MIN\_VALUE 最小值 属性返回JavaScript中可以表示的最接近于0(但不等于0)的数。其值为5E-324。
8.  Number.MAX\_VALUE 最大值 返回JavaScript中可以表示的最大数值。其值约等于1.7976931348623157E+308。
9.  Number.NEGATIVE\_INFINITY 负无穷
10. Number.POSITIVE\_INFINITY 正无穷
11. NaN: Not a number. NaN === NaN // false NaN 不等于任何值
12. NaN是一个number类型，一个特殊的数值。 ES6 Object.is(NaN,NaN) // true
13. Number.MAX\_SAFE\_INTEGER: 最大安全整数 = 9007199254740991 2的53次方 - 1

#### window 下的 isNaN 天坑 只能使用 Number 下的 isNaN

<https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/isNaN>

    isNaN(NaN);       // true
    isNaN(undefined); // true
    isNaN({});        // true
    isNaN("37,5");    // true
    isNaN('123ABC');  // true:  parseInt("123ABC") 的结果是 123，但是 Number("123ABC") 结果是 NaN

