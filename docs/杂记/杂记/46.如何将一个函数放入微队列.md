# 将一个函数放入微队列(微任务)
- Promise.then
- MutationObserver
- queueMicrotask: 官方提供的微队列函数 支持2018年之后的chrome
- process.nextTick:node环境中
```javascript
function runMicroTask(fn) {
	if(typeof queueMicrotask === 'function') {
		queueMicrotask(fn);
	} else if (typeof MutationObserver === 'function') {
		const ob = new MutationObserver(fn);
		const node = document.createTextNode('');
		ob.observe(node, { characterData: true });
		node.data = '1';
	} else if(Promise && typeof Promise.then === 'function') {
	 	Promise.then(fn);
	}
}
```
## 如何判断一个东西是不是Promise(满足Promise的A+规范)
```javascript
	function isPromiselike(value) {
		return ((typeof value === 'object' || typeof value === 'function') && typeof value.then === 'function')
	}
```
